name: ğŸ›¡ï¸ Bulletproof Mobile Build with Strict Result Validation

# Ù†Ø¸Ø§Ù… Ø¨Ù†Ø§Ø¡ Ù…Ù‚Ø§ÙˆÙ… Ù„Ù„Ø£Ø®Ø·Ø§Ø¡ Ù…Ø¹ ÙØ­Øµ ØµØ§Ø±Ù… Ù„ÙƒÙ„ Ù†ØªÙŠØ¬Ø©
on:
  push:
    branches: [ main, develop, test-*, fix-* ]
  pull_request:
    branches: [ main, develop ]
  workflow_dispatch:

env:
  GRADLE_VERSION: 8.14.3
  GRADLE_USER_HOME: ${{ github.workspace }}/.gradle
  ENABLE_ADVANCED_DIAGNOSTICS: true
  # Ù…ØªØºÙŠØ± Ù„Ù„ØªØ­ÙƒÙ… ÙÙŠ Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ØµØ±Ø§Ù…Ø© ÙÙŠ ÙØ­Øµ Ø§Ù„Ù†ØªØ§Ø¦Ø¬
  STRICT_VALIDATION: true

jobs:
  build:
    runs-on: ubuntu-latest
    
    steps:
    # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    # Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰: Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø¨ÙŠØ¦Ø© Ù…Ø¹ ÙØ­Øµ ØµØ§Ø±Ù…
    # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    
    - name: ğŸ“¥ Checkout with Validation
      uses: actions/checkout@v5
      with:
        fetch-depth: 0

    # ÙØ­Øµ ÙÙˆØ±ÙŠ Ù„Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ù†Ø¬Ø§Ø­ Ø¹Ù…Ù„ÙŠØ© Ø§Ù„ØªØ­Ù…ÙŠÙ„
    - name: âœ… Validate Repository Checkout
      run: |
        echo "ğŸ” ÙØ­Øµ ØµØ­Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø³ØªÙˆØ¯Ø¹..."
        
        # Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©
        critical_files=(
          "app/build.gradle"
          "app/src/main/AndroidManifest.xml"
        )
        
        checkout_success=true
        for file in "${critical_files[@]}"; do
          if [ ! -f "$file" ]; then
            echo "âŒ Ù…Ù„Ù Ø­Ø±Ø¬ Ù…ÙÙ‚ÙˆØ¯: $file"
            checkout_success=false
          fi
        done
        
        if [ "$checkout_success" = false ]; then
          echo "ğŸ’¥ Ø®Ø·Ø£ Ø­Ø±Ø¬: ÙØ´Ù„ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø³ØªÙˆØ¯Ø¹ Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­"
          echo "ğŸ”§ Ø§Ù„Ø­Ù„: ØªØ£ÙƒØ¯ Ù…Ù† Ø£Ù† Ø§Ù„Ù…Ù„ÙØ§Øª Ù…ÙˆØ¬ÙˆØ¯Ø© ÙÙŠ Ø§Ù„Ù…Ø³ØªÙˆØ¯Ø¹"
          exit 1
        fi
        
        echo "âœ… ØªÙ… Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµØ­Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø³ØªÙˆØ¯Ø¹"

    - name: â˜• Setup JDK with Validation
      uses: actions/setup-java@v5
      with:
        distribution: 'temurin'
        java-version: '17'

    # ÙØ­Øµ ÙÙˆØ±ÙŠ Ù„Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø¥Ø¹Ø¯Ø§Ø¯ Java Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­
    - name: âœ… Validate Java Setup
      run: |
        echo "ğŸ” ÙØ­Øµ ØµØ­Ø© Ø¥Ø¹Ø¯Ø§Ø¯ Java..."
        
        if ! java -version 2>/dev/null; then
          echo "âŒ Java ØºÙŠØ± Ù…ÙØ¹Ø¯Ù‘ Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­"
          exit 1
        fi
        
        if [ -z "$JAVA_HOME" ]; then
          echo "âŒ Ù…ØªØºÙŠØ± JAVA_HOME ØºÙŠØ± Ù…Ø­Ø¯Ø¯"
          exit 1
        fi
        
        java_version=$(java -version 2>&1 | head -1 | cut -d'"' -f2)
        if [[ ! "$java_version" =~ ^17\. ]]; then
          echo "âŒ Ù†Ø³Ø®Ø© Java ØºÙŠØ± ØµØ­ÙŠØ­Ø©: $java_version (Ø§Ù„Ù…Ø·Ù„ÙˆØ¨: 17.x)"
          exit 1
        fi
        
        echo "âœ… Java Ù…Ø¹Ø¯Ù‘ Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­ - Ø§Ù„Ù†Ø³Ø®Ø©: $java_version"

    # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    # Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ©: ÙØ­Øµ Ø´Ø§Ù…Ù„ Ù„Ù„Ù…Ø´Ø±ÙˆØ¹ Ù…Ø¹ Ù…Ø¹Ø§ÙŠÙŠØ± ØµØ§Ø±Ù…Ø©
    # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    
    - name: ğŸ” Comprehensive Project Health Check
      run: |
        echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
        echo "ğŸ¥ ÙØ­Øµ ØµØ­Ø© Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø§Ù„Ø´Ø§Ù…Ù„"
        echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
        
        project_health=true
        
        # ÙØ­Øµ Ø¨Ù†ÙŠØ© Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©
        echo "ğŸ“‚ ÙØ­Øµ Ø¨Ù†ÙŠØ© Ø§Ù„Ù…Ø´Ø±ÙˆØ¹:"
        required_structure=(
          "app/"
          "app/src/"
          "app/src/main/"
          "app/src/main/java/"
          "app/src/main/res/"
          "app/src/main/res/layout/"
        )
        
        for dir in "${required_structure[@]}"; do
          if [ ! -d "$dir" ]; then
            echo "âŒ Ù…Ø¬Ù„Ø¯ Ù…Ø·Ù„ÙˆØ¨ Ù…ÙÙ‚ÙˆØ¯: $dir"
            project_health=false
          else
            echo "âœ… $dir Ù…ÙˆØ¬ÙˆØ¯"
          fi
        done
        
        # ÙØ­Øµ Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ø­Ø±Ø¬Ø©
        echo ""
        echo "ğŸ“„ ÙØ­Øµ Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ø­Ø±Ø¬Ø©:"
        critical_files=(
          "app/build.gradle"
          "app/src/main/AndroidManifest.xml"
          "app/src/main/res/layout/activity_main.xml"
          "gradle.properties"
          "settings.gradle"
        )
        
        for file in "${critical_files[@]}"; do
          if [ -f "$file" ]; then
            file_size=$(stat -c%s "$file" 2>/dev/null || stat -f%z "$file" 2>/dev/null)
            if [ "$file_size" -gt 0 ]; then
              echo "âœ… $file Ù…ÙˆØ¬ÙˆØ¯ ÙˆØºÙŠØ± ÙØ§Ø±Øº ($file_size Ø¨Ø§ÙŠØª)"
            else
              echo "âŒ $file ÙØ§Ø±Øº!"
              project_health=false
            fi
          else
            echo "âŒ $file ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯!"
            project_health=false
          fi
        done
        
        # ÙØ­Øµ Gradle Wrapper Ø§Ù„Ø­Ø§Ù„ÙŠ
        echo ""
        echo "âš™ï¸ ÙØ­Øµ Gradle Wrapper Ø§Ù„Ø­Ø§Ù„ÙŠ:"
        wrapper_health=true
        
        if [ ! -f "gradlew" ]; then
          echo "âš ï¸ gradlew ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯ - Ø³ÙŠØªÙ… Ø¥Ù†Ø´Ø§Ø¤Ù‡"
          wrapper_health=false
        else
          if [ ! -x "gradlew" ]; then
            echo "âš ï¸ gradlew ØºÙŠØ± Ù‚Ø§Ø¨Ù„ Ù„Ù„ØªÙ†ÙÙŠØ° - Ø³ÙŠØªÙ… Ø¥ØµÙ„Ø§Ø­Ù‡"
            wrapper_health=false
          fi
        fi
        
        if [ ! -f "gradle/wrapper/gradle-wrapper.properties" ]; then
          echo "âš ï¸ gradle-wrapper.properties ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯ - Ø³ÙŠØªÙ… Ø¥Ù†Ø´Ø§Ø¤Ù‡"
          wrapper_health=false
        fi
        
        if [ "$wrapper_health" = true ]; then
          echo "âœ… Gradle Wrapper ÙÙŠ Ø­Ø§Ù„Ø© Ø¬ÙŠØ¯Ø©"
        fi
        
        # ØªÙ‚ÙŠÙŠÙ… Ø§Ù„ØµØ­Ø© Ø§Ù„Ø¹Ø§Ù…Ø© Ù„Ù„Ù…Ø´Ø±ÙˆØ¹
        if [ "$project_health" = false ]; then
          echo ""
          echo "ğŸ’¥ Ø®Ø·Ø£ Ø­Ø±Ø¬: Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ù…Ø´Ø§ÙƒÙ„ Ø¨Ù†ÙŠÙˆÙŠØ© Ø£Ø³Ø§Ø³ÙŠØ©"
          echo "ğŸ”§ Ø§Ù„Ø­Ù„: ØªØ£ÙƒØ¯ Ù…Ù† Ø£Ù† Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù„ÙØ§Øª ÙˆØ§Ù„Ù…Ø¬Ù„Ø¯Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø© Ù…ÙˆØ¬ÙˆØ¯Ø©"
          exit 1
        fi
        
        echo ""
        echo "âœ… ÙØ­Øµ ØµØ­Ø© Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ù…ÙƒØªÙ…Ù„ Ø¨Ù†Ø¬Ø§Ø­"

    # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    # Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø«Ø§Ù„Ø«Ø©: ØªØ­Ù„ÙŠÙ„ XML Ù…Ø¹ Ø¥ØµÙ„Ø§Ø­ Ù…Ø¶Ù…ÙˆÙ†
    # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    
    - name: ğŸ” XML Analysis with Guaranteed Fix
      if: env.ENABLE_ADVANCED_DIAGNOSTICS == 'true'
      run: |
        echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
        echo "ğŸ”¬ ØªØ­Ù„ÙŠÙ„ XML Ù…Ø¹ Ø¥ØµÙ„Ø§Ø­ Ù…Ø¶Ù…ÙˆÙ†"
        echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
        
        layout_file="app/src/main/res/layout/activity_main.xml"
        backup_file="app/src/main/res/layout/activity_main.xml.backup"
        
        if [ ! -f "$layout_file" ]; then
          echo "âŒ Ù…Ù„Ù activity_main.xml ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯!"
          exit 1
        fi
        
        # Ø¥Ù†Ø´Ø§Ø¡ Ù†Ø³Ø®Ø© Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© Ø¥Ø¬Ø¨Ø§Ø±ÙŠØ©
        cp "$layout_file" "$backup_file"
        echo "âœ… ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ù†Ø³Ø®Ø© Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©"
        
        # ÙØ­Øµ ÙˆØ¥Ø­ØµØ§Ø¡ Ø§Ù„Ù…Ø´Ø§ÙƒÙ„
        echo ""
        echo "ğŸ” ÙØ­Øµ Ø§Ù„Ù…Ø´Ø§ÙƒÙ„ Ø§Ù„Ù…Ø¹Ø±ÙˆÙØ©:"
        
        problems_found=0
        
        # Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† expandedTitleEnabled
        if grep -q "expandedTitleEnabled" "$layout_file"; then
          echo "ğŸš¨ Ù…Ø´ÙƒÙ„Ø© 1: expandedTitleEnabled Ù…ÙˆØ¬ÙˆØ¯Ø©"
          problems_found=$((problems_found + 1))
        fi
        
        # Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ù…Ø´Ø§ÙƒÙ„ Ø£Ø®Ø±Ù‰ Ù…Ø­ØªÙ…Ù„Ø©
        problematic_attrs=(
          "expandedTitleGravity"
          "expandedTitleMargin"
          "expandedTitleTypeface"
          "collapsedTitleEnabled"
        )
        
        for attr in "${problematic_attrs[@]}"; do
          if grep -q "$attr" "$layout_file"; then
            echo "ğŸš¨ Ù…Ø´ÙƒÙ„Ø© Ù…Ø­ØªÙ…Ù„Ø©: $attr Ù…ÙˆØ¬ÙˆØ¯Ø©"
            problems_found=$((problems_found + 1))
          fi
        done
        
        # ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø¥ØµÙ„Ø§Ø­Ø§Øª
        if [ $problems_found -gt 0 ]; then
          echo ""
          echo "ğŸ”§ ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø¥ØµÙ„Ø§Ø­Ø§Øª ($problems_found Ù…Ø´Ø§ÙƒÙ„ Ù…Ø¹Ø«ÙˆØ± Ø¹Ù„ÙŠÙ‡Ø§):"
          
          # Ø¥ØµÙ„Ø§Ø­ expandedTitleEnabled
          if grep -q "expandedTitleEnabled" "$layout_file"; then
            sed -i 's/.*expandedTitleEnabled.*/        <!-- FIXED AUTO: expandedTitleEnabled not supported -->/' "$layout_file"
            echo "âœ… ØªÙ… Ø¥ØµÙ„Ø§Ø­ expandedTitleEnabled"
          fi
          
          # Ø¥ØµÙ„Ø§Ø­ Ø§Ù„Ù…Ø´Ø§ÙƒÙ„ Ø§Ù„Ø£Ø®Ø±Ù‰
          for attr in "${problematic_attrs[@]}"; do
            if grep -q "$attr" "$layout_file"; then
              sed -i "s/.*$attr.*/        <!-- FIXED AUTO: $attr not supported -->/" "$layout_file"
              echo "âœ… ØªÙ… Ø¥ØµÙ„Ø§Ø­ $attr"
            fi
          done
          
          # Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ù†Ø¬Ø§Ø­ Ø§Ù„Ø¥ØµÙ„Ø§Ø­
          remaining_problems=0
          for attr in "expandedTitleEnabled" "${problematic_attrs[@]}"; do
            if grep -q "$attr" "$layout_file" && ! grep -q "<!-- FIXED AUTO:" "$layout_file"; then
              remaining_problems=$((remaining_problems + 1))
            fi
          done
          
          if [ $remaining_problems -gt 0 ]; then
            echo "âŒ ÙØ´Ù„ ÙÙŠ Ø¥ØµÙ„Ø§Ø­ Ø¨Ø¹Ø¶ Ø§Ù„Ù…Ø´Ø§ÙƒÙ„"
            exit 1
          fi
          
          echo "âœ… ØªÙ… Ø¥ØµÙ„Ø§Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø´Ø§ÙƒÙ„ Ø§Ù„Ù…Ø¹Ø±ÙˆÙØ© Ø¨Ù†Ø¬Ø§Ø­"
        else
          echo "âœ… Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ù…Ø´Ø§ÙƒÙ„ Ù…Ø¹Ø±ÙˆÙØ©"
        fi

    # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    # Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø±Ø§Ø¨Ø¹Ø©: Ø¥Ø¹Ø¯Ø§Ø¯ Gradle Ù…Ø¹ ÙØ­Øµ Ù…Ø¶Ù…ÙˆÙ† Ù„Ù„Ù†ØªÙŠØ¬Ø©
    # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    
    - name: âš™ï¸ Gradle Environment Setup with Validation
      run: |
        echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
        echo "âš™ï¸ Ø¥Ø¹Ø¯Ø§Ø¯ Ø¨ÙŠØ¦Ø© Gradle Ù…Ø¹ Ø§Ù„ØªØ­Ù‚Ù‚"
        echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
        
        # Ø¥Ø¹Ø¯Ø§Ø¯ Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø¨ÙŠØ¦Ø©
        echo "GRADLE_USER_HOME=$GITHUB_WORKSPACE/.gradle" >> $GITHUB_ENV
        mkdir -p "$GITHUB_WORKSPACE/.gradle"
        
        # Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø¬Ù„Ø¯
        if [ ! -d "$GITHUB_WORKSPACE/.gradle" ]; then
          echo "âŒ ÙØ´Ù„ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø¬Ù„Ø¯ .gradle"
          exit 1
        fi
        
        # ØªÙ†Ø¸ÙŠÙ cache Ù…Ø­ØªÙ…Ù„ Ø§Ù„ØªÙ„Ù
        rm -rf ~/.gradle/caches/jars-9 2>/dev/null || true
        rm -rf "$GITHUB_WORKSPACE/.gradle/caches/jars-9" 2>/dev/null || true
        
        echo "âœ… ØªÙ… Ø¥Ø¹Ø¯Ø§Ø¯ Ø¨ÙŠØ¦Ø© Gradle Ø¨Ù†Ø¬Ø§Ø­"

    - name: ğŸ“¥ Bulletproof Gradle Download
      run: |
        echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
        echo "ğŸ“¥ ØªØ­Ù…ÙŠÙ„ Gradle Ø§Ù„Ù…Ù‚Ø§ÙˆÙ… Ù„Ù„Ø£Ø®Ø·Ø§Ø¡"
        echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
        
        gradle_url="https://services.gradle.org/distributions/gradle-$GRADLE_VERSION-bin.zip"
        gradle_zip="gradle-$GRADLE_VERSION-bin.zip"
        
        # Ø¯Ø§Ù„Ø© ØªØ­Ù…ÙŠÙ„ Ù…Ø­Ø³Ù†Ø© Ù…Ø¹ ÙØ­Øµ ØµØ§Ø±Ù…
        download_and_validate() {
          local attempt=1
          local max_attempts=3
          
          while [ $attempt -le $max_attempts ]; do
            echo "ğŸ”„ Ù…Ø­Ø§ÙˆÙ„Ø© $attempt Ù…Ù† $max_attempts"
            
            # Ø­Ø°Ù Ø£ÙŠ Ù…Ù„Ù Ø³Ø§Ø¨Ù‚ ØªØ§Ù„Ù
            rm -f "$gradle_zip"
            
            # Ø§Ù„ØªØ­Ù…ÙŠÙ„ Ù…Ø¹ timeout
            if timeout 300 wget --progress=dot:giga --retry-connrefused --read-timeout=30 "$gradle_url" -O "$gradle_zip"; then
              # ÙØ­Øµ ØµØ§Ø±Ù… Ù„Ù„Ù…Ù„Ù Ø§Ù„Ù…Ø­Ù…Ù„
              if [ -f "$gradle_zip" ] && [ -s "$gradle_zip" ]; then
                file_size=$(stat -c%s "$gradle_zip" 2>/dev/null || stat -f%z "$gradle_zip")
                # Gradle binary Ø¹Ø§Ø¯Ø© Ø£ÙƒØ¨Ø± Ù…Ù† 100MB
                if [ "$file_size" -gt 104857600 ]; then
                  echo "âœ… ØªÙ… ØªØ­Ù…ÙŠÙ„ Gradle Ø¨Ù†Ø¬Ø§Ø­ ($file_size Ø¨Ø§ÙŠØª)"
                  
                  # ÙØ­Øµ Ø¥Ø¶Ø§ÙÙŠ - Ù…Ø­Ø§ÙˆÙ„Ø© ÙØ­Øµ Ù†ÙˆØ¹ Ø§Ù„Ù…Ù„Ù
                  if file "$gradle_zip" | grep -q "Zip archive"; then
                    echo "âœ… Ø§Ù„Ù…Ù„Ù Ø§Ù„Ù…Ø­Ù…Ù„ Ù‡Ùˆ Ø£Ø±Ø´ÙŠÙ zip ØµØ§Ù„Ø­"
                    return 0
                  else
                    echo "âŒ Ø§Ù„Ù…Ù„Ù Ø§Ù„Ù…Ø­Ù…Ù„ Ù„ÙŠØ³ Ø£Ø±Ø´ÙŠÙ zip ØµØ§Ù„Ø­"
                  fi
                else
                  echo "âŒ Ø­Ø¬Ù… Ø§Ù„Ù…Ù„Ù ØµØºÙŠØ± Ø¬Ø¯Ø§Ù‹ ($file_size Ø¨Ø§ÙŠØª) - Ù…Ù„Ù ØªØ§Ù„Ù"
                fi
              else
                echo "âŒ Ø§Ù„Ù…Ù„Ù Ø§Ù„Ù…Ø­Ù…Ù„ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯ Ø£Ùˆ ÙØ§Ø±Øº"
              fi
            else
              echo "âŒ ÙØ´Ù„ ÙÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„ (timeout Ø£Ùˆ Ø®Ø·Ø£ Ø´Ø¨ÙƒØ©)"
            fi
            
            echo "â³ Ø§Ù†ØªØ¸Ø§Ø± 10 Ø«ÙˆØ§Ù† Ù‚Ø¨Ù„ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø©..."
            sleep 10
            attempt=$((attempt + 1))
          done
          
          return 1
        }
        
        if download_and_validate; then
          echo "ğŸ‰ ØªØ­Ù…ÙŠÙ„ Gradle Ù…ÙƒØªÙ…Ù„ ÙˆÙ…ØªØ­Ù‚Ù‚ Ù…Ù†Ù‡"
        else
          echo "ğŸ’¥ Ø®Ø·Ø£ Ø­Ø±Ø¬: ÙØ´Ù„ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Gradle Ø¨Ø¹Ø¯ 3 Ù…Ø­Ø§ÙˆÙ„Ø§Øª"
          echo "ğŸ”§ Ø§Ù„Ø­Ù„: ØªØ­Ù‚Ù‚ Ù…Ù† Ø§ØªØµØ§Ù„ Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª Ø£Ùˆ Ø¬Ø±Ø¨ Ù„Ø§Ø­Ù‚Ø§Ù‹"
          exit 1
        fi

    - name: ğŸ“¦ Bulletproof Gradle Extraction
      run: |
        echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
        echo "ğŸ“¦ ÙÙƒ Ø¶ØºØ· Gradle Ø§Ù„Ù…Ù‚Ø§ÙˆÙ… Ù„Ù„Ø£Ø®Ø·Ø§Ø¡"
        echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
        
        gradle_zip="gradle-$GRADLE_VERSION-bin.zip"
        gradle_dir="gradle-$GRADLE_VERSION"
        
        # Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ù…Ù„Ù Ø§Ù„Ø¶ØºØ·
        if [ ! -f "$gradle_zip" ]; then
          echo "âŒ Ù…Ù„Ù gradle zip ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯!"
          exit 1
        fi
        
        # ÙÙƒ Ø§Ù„Ø¶ØºØ· Ù…Ø¹ Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø£Ø®Ø·Ø§Ø¡
        echo "ğŸ“‚ ÙÙƒ Ø¶ØºØ· $gradle_zip..."
        if unzip -q "$gradle_zip"; then
          echo "âœ… ØªÙ… ÙÙƒ Ø§Ù„Ø¶ØºØ·"
          
          # Ø§Ù„ØªØ­Ù‚Ù‚ Ø§Ù„ØµØ§Ø±Ù… Ù…Ù† Ø§Ù„Ù†ØªÙŠØ¬Ø©
          if [ ! -d "$gradle_dir" ]; then
            echo "âŒ Ù…Ø¬Ù„Ø¯ gradle ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯ Ø¨Ø¹Ø¯ ÙÙƒ Ø§Ù„Ø¶ØºØ·!"
            exit 1
          fi
          
          if [ ! -f "$gradle_dir/bin/gradle" ]; then
            echo "âŒ Ù…Ù„Ù gradle Ø§Ù„ØªÙ†ÙÙŠØ°ÙŠ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯!"
            exit 1
          fi
          
          # Ø¶Ø¨Ø· Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª ÙˆÙØ­ØµÙ‡Ø§
          chmod +x "$gradle_dir/bin/gradle"
          if [ ! -x "$gradle_dir/bin/gradle" ]; then
            echo "âŒ ÙØ´Ù„ ÙÙŠ Ø¶Ø¨Ø· ØµÙ„Ø§Ø­ÙŠØ§Øª gradle"
            exit 1
          fi
          
          # Ø§Ø®ØªØ¨Ø§Ø± ØªØ´ØºÙŠÙ„ Gradle
          echo ""
          echo "ğŸ§ª Ø§Ø®ØªØ¨Ø§Ø± Gradle:"
          if timeout 60 ./$gradle_dir/bin/gradle --version; then
            echo "âœ… Gradle ÙŠØ¹Ù…Ù„ Ø¨Ø´ÙƒÙ„ Ù…Ø«Ø§Ù„ÙŠ!"
          else
            echo "âŒ Gradle Ù„Ø§ ÙŠØ¹Ù…Ù„ Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­"
            exit 1
          fi
          
        else
          echo "âŒ ÙØ´Ù„ ÙÙŠ ÙÙƒ Ø§Ù„Ø¶ØºØ·"
          exit 1
        fi
        
        # ØªÙ†Ø¸ÙŠÙ Ù…Ù„Ù Ø§Ù„Ø¶ØºØ·
        rm -f "$gradle_zip"
        echo "âœ… ØªÙ… ØªÙ†Ø¸ÙŠÙ Ù…Ù„Ù Ø§Ù„Ø¶ØºØ·"

    # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    # Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø®Ø§Ù…Ø³Ø©: Ø¥Ù†Ø´Ø§Ø¡ Wrapper Ù…Ø¹ ÙØ­Øµ Ù…Ø¶Ù…ÙˆÙ†
    # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    
    - name: ğŸ”§ Bulletproof Wrapper Generation
      run: |
        echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
        echo "ğŸ”§ Ø¥Ù†Ø´Ø§Ø¡ Gradle Wrapper Ø§Ù„Ù…Ù‚Ø§ÙˆÙ… Ù„Ù„Ø£Ø®Ø·Ø§Ø¡"
        echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
        
        gradle_dir="gradle-$GRADLE_VERSION"
        
        # Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙˆØ¬ÙˆØ¯ gradle Ù‚Ø¨Ù„ Ø§Ù„Ø¨Ø¯Ø¡
        if [ ! -x "$gradle_dir/bin/gradle" ]; then
          echo "âŒ Gradle ØºÙŠØ± Ù…ØªÙˆÙØ± Ø£Ùˆ ØºÙŠØ± Ù‚Ø§Ø¨Ù„ Ù„Ù„ØªÙ†ÙÙŠØ°"
          exit 1
        fi
        
        # Ø¥Ù†Ø´Ø§Ø¡ wrapper Ù…Ø¹ timeout
        echo "âš¡ Ø¥Ù†Ø´Ø§Ø¡ Gradle Wrapper..."
        if timeout 180 ./$gradle_dir/bin/gradle wrapper \
          --gradle-version "$GRADLE_VERSION" \
          --distribution-type all \
          --gradle-distribution-url "https://services.gradle.org/distributions/gradle-$GRADLE_VERSION-all.zip"; then
          
          echo "âœ… Ø£ÙƒØªÙ…Ù„Øª Ø¹Ù…Ù„ÙŠØ© Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù€ wrapper"
          
          # ÙØ­Øµ ØµØ§Ø±Ù… Ù„Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ù…ÙÙ†Ø´Ø£Ø©
          echo ""
          echo "ğŸ” ÙØ­Øµ ØµØ§Ø±Ù… Ù„Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ù…ÙÙ†Ø´Ø£Ø©:"
          
          required_files=(
            "gradlew"
            "gradlew.bat"
            "gradle/wrapper/gradle-wrapper.jar"
            "gradle/wrapper/gradle-wrapper.properties"
          )
          
          wrapper_success=true
          for file in "${required_files[@]}"; do
            if [ ! -f "$file" ]; then
              echo "âŒ $file ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯!"
              wrapper_success=false
            else
              file_size=$(stat -c%s "$file" 2>/dev/null || stat -f%z "$file")
              if [ "$file_size" -eq 0 ]; then
                echo "âŒ $file ÙØ§Ø±Øº!"
                wrapper_success=false
              else
                echo "âœ… $file Ù…ÙˆØ¬ÙˆØ¯ ÙˆØµØ§Ù„Ø­ ($file_size Ø¨Ø§ÙŠØª)"
              fi
            fi
          done
          
          if [ "$wrapper_success" = false ]; then
            echo "ğŸ’¥ Ø®Ø·Ø£ Ø­Ø±Ø¬: ÙØ´Ù„ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ wrapper files ØµØ§Ù„Ø­Ø©"
            exit 1
          fi
          
          # Ø¶Ø¨Ø· ØµÙ„Ø§Ø­ÙŠØ§Øª gradlew ÙˆÙØ­ØµÙ‡Ø§
          chmod +x gradlew
          if [ ! -x "gradlew" ]; then
            echo "âŒ ÙØ´Ù„ ÙÙŠ Ø¶Ø¨Ø· ØµÙ„Ø§Ø­ÙŠØ§Øª gradlew"
            exit 1
          fi
          
          # Ø§Ø®ØªØ¨Ø§Ø± Gradle Wrapper
          echo ""
          echo "ğŸ§ª Ø§Ø®ØªØ¨Ø§Ø± Gradle Wrapper:"
          if timeout 120 ./gradlew --version; then
            echo "âœ… Gradle Wrapper ÙŠØ¹Ù…Ù„ Ø¨Ø´ÙƒÙ„ Ù…Ø«Ø§Ù„ÙŠ!"
          else
            echo "âŒ Gradle Wrapper Ù„Ø§ ÙŠØ¹Ù…Ù„"
            exit 1
          fi
          
        else
          echo "âŒ ÙØ´Ù„ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ Gradle Wrapper (timeout Ø£Ùˆ Ø®Ø·Ø£)"
          exit 1
        fi
        
        # ØªÙ†Ø¸ÙŠÙ Ù…Ø¬Ù„Ø¯ gradle Ø§Ù„Ù…Ø¤Ù‚Øª
        rm -rf "$gradle_dir"
        echo "âœ… ØªÙ… ØªÙ†Ø¸ÙŠÙ Ù…Ù„ÙØ§Øª Gradle Ø§Ù„Ù…Ø¤Ù‚ØªØ©"

    # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    # Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø³Ø§Ø¯Ø³Ø©: Ø§Ù„Ø¨Ù†Ø§Ø¡ Ù…Ø¹ ÙØ­Øµ Ù…Ø¶Ù…ÙˆÙ† Ù„Ù„Ù†ØªÙŠØ¬Ø©
    # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    
    - name: ğŸ—ï¸ Bulletproof Build with Result Verification
      env:
        JITPACK_TOKEN: ${{ secrets.JITPACK_TOKEN }}
      run: |
        echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
        echo "ğŸ—ï¸ Ø¨Ù†Ø§Ø¡ Ù…Ù‚Ø§ÙˆÙ… Ù„Ù„Ø£Ø®Ø·Ø§Ø¡ Ù…Ø¹ ÙØ­Øµ Ø§Ù„Ù†ØªÙŠØ¬Ø©"
        echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
        
        # Ø¥Ø¹Ø¯Ø§Ø¯ Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø¨Ù†Ø§Ø¡ Ø§Ù„Ù…Ø­Ø³Ù†Ø©
        export GRADLE_OPTS="-Dorg.gradle.daemon=false -Dorg.gradle.parallel=true -Dorg.gradle.configureondemand=true -Dorg.gradle.caching=true"
        export JAVA_OPTS="-Xmx4g -XX:MaxMetaspaceSize=512m"
        
        echo "âš™ï¸ Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø¨ÙŠØ¦Ø©:"
        echo "GRADLE_OPTS: $GRADLE_OPTS"
        echo "JAVA_OPTS: $JAVA_OPTS"
        echo ""
        
        # Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµØ­Ø© gradlew Ù‚Ø¨Ù„ Ø§Ù„Ø¨Ø¯Ø¡
        if [ ! -x "gradlew" ]; then
          echo "âŒ gradlew ØºÙŠØ± Ù‚Ø§Ø¨Ù„ Ù„Ù„ØªÙ†ÙÙŠØ°"
          exit 1
        fi
        
        # Ø¨Ø¯Ø¡ Ø§Ù„Ø¨Ù†Ø§Ø¡ Ù…Ø¹ timeout ÙˆØªØ³Ø¬ÙŠÙ„ Ù…ÙØµÙ„
        echo "ğŸš€ Ø¨Ø¯Ø¡ Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ø¨Ù†Ø§Ø¡..."
        build_start_time=$(date +%s)
        
        # ØªØ´ØºÙŠÙ„ Ø§Ù„Ø¨Ù†Ø§Ø¡ Ù…Ø¹ Ù…Ø¹Ø§Ù„Ø¬Ø© Ø´Ø§Ù…Ù„Ø© Ù„Ù„Ø£Ø®Ø·Ø§Ø¡
        build_exit_code=0
        timeout 1200 ./gradlew assembleDebug \
          --stacktrace \
          --info \
          --warning-mode all \
          --build-cache \
          --gradle-user-home="$GRADLE_USER_HOME" \
          2>&1 | tee detailed_build.log || build_exit_code=$?
        
        build_end_time=$(date +%s)
        build_duration=$((build_end_time - build_start_time))
        
        echo ""
        echo "â±ï¸ Ù…Ø¯Ø© Ø§Ù„Ø¨Ù†Ø§Ø¡: ${build_duration} Ø«Ø§Ù†ÙŠØ©"
        
        # ÙØ­Øµ ØµØ§Ø±Ù… Ù„Ù†ØªÙŠØ¬Ø© Ø§Ù„Ø¨Ù†Ø§Ø¡
        echo ""
        echo "ğŸ” ÙØ­Øµ ØµØ§Ø±Ù… Ù„Ù†ØªÙŠØ¬Ø© Ø§Ù„Ø¨Ù†Ø§Ø¡:"
        
        # ÙØ­Øµ exit code
        if [ $build_exit_code -ne 0 ]; then
          echo "âŒ Ø§Ù„Ø¨Ù†Ø§Ø¡ ÙØ´Ù„ Ø¨Ø±Ù…Ø² Ø§Ù„Ø®Ø·Ø£: $build_exit_code"
          
          # ØªØ­Ù„ÙŠÙ„ Ø³Ø±ÙŠØ¹ Ù„Ù„Ø®Ø·Ø£
          if [ -f "detailed_build.log" ]; then
            echo ""
            echo "ğŸ” ØªØ­Ù„ÙŠÙ„ Ø³Ø±ÙŠØ¹ Ù„Ù„Ø®Ø·Ø£:"
            if grep -q "BUILD FAILED" detailed_build.log; then
              echo "ğŸš¨ Ø§Ù„Ø¨Ù†Ø§Ø¡ ÙØ´Ù„ Ø¨ÙˆØ¶ÙˆØ­ (BUILD FAILED Ù…ÙˆØ¬ÙˆØ¯ ÙÙŠ Ø§Ù„Ø³Ø¬Ù„)"
            fi
            
            if grep -q -i "timeout" detailed_build.log; then
              echo "ğŸš¨ Ø§Ù„Ø¨Ù†Ø§Ø¡ Ø§Ù†ØªÙ‡Øª Ù…Ù‡Ù„ØªÙ‡ Ø§Ù„Ø²Ù…Ù†ÙŠØ©"
            fi
            
            echo ""
            echo "ğŸ“‹ Ø¢Ø®Ø± 20 Ø³Ø·Ø± Ù…Ù† Ø³Ø¬Ù„ Ø§Ù„Ø¨Ù†Ø§Ø¡:"
            tail -20 detailed_build.log
          fi
          
          exit 1
        fi
        
        # ÙØ­Øµ ÙˆØ¬ÙˆØ¯ BUILD SUCCESSFUL ÙÙŠ Ø§Ù„Ø³Ø¬Ù„
        if ! grep -q "BUILD SUCCESSFUL" detailed_build.log 2>/dev/null; then
          echo "âŒ Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ 'BUILD SUCCESSFUL' ÙÙŠ Ø³Ø¬Ù„ Ø§Ù„Ø¨Ù†Ø§Ø¡"
          exit 1
        fi
        
        # ÙØ­Øµ ÙˆØ¬ÙˆØ¯ Ù…Ù„Ù APK
        apk_path="app/build/outputs/apk/debug/app-debug.apk"
        if [ ! -f "$apk_path" ]; then
          echo "âŒ Ù…Ù„Ù APK ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯ ÙÙŠ Ø§Ù„Ù…Ø³Ø§Ø± Ø§Ù„Ù…ØªÙˆÙ‚Ø¹: $apk_path"
          
          # Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ù…Ù„ÙØ§Øª APK ÙÙŠ Ø£ÙŠ Ù…ÙƒØ§Ù†
          echo "ğŸ” Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ù…Ù„ÙØ§Øª APK ÙÙŠ ÙƒØ§Ù…Ù„ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹:"
          find . -name "*.apk" -type f 2>/dev/null || echo "Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù„ÙØ§Øª APK ÙÙŠ Ø£ÙŠ Ù…ÙƒØ§Ù†!"
          
          exit 1
        fi
        
        # ÙØ­Øµ ØµØ­Ø© Ù…Ù„Ù APK
        apk_size=$(stat -c%s "$apk_path" 2>/dev/null || stat -f%z "$apk_path")
        if [ "$apk_size" -lt 1024 ]; then  # Ø£Ù‚Ù„ Ù…Ù† 1KB
          echo "âŒ Ù…Ù„Ù APK ØµØºÙŠØ± Ø¬Ø¯Ø§Ù‹ ($apk_size Ø¨Ø§ÙŠØª) - Ø¹Ù„Ù‰ Ø§Ù„Ø£Ø±Ø¬Ø­ ØªØ§Ù„Ù"
          exit 1
        fi
        
        # ÙØ­Øµ Ø¥Ø¶Ø§ÙÙŠ - Ù…Ø­Ø§ÙˆÙ„Ø© ÙØ­Øµ Ù†ÙˆØ¹ Ø§Ù„Ù…Ù„Ù
        if ! file "$apk_path" | grep -q -i "zip\|archive"; then
          echo "âŒ Ù…Ù„Ù APK Ù„Ø§ ÙŠØ¨Ø¯Ùˆ ÙƒØ£Ø±Ø´ÙŠÙ ØµØ§Ù„Ø­"
          exit 1
        fi
        
        # Ø¥Ø°Ø§ ÙˆØµ
